---
const personalImageAlt = "Diego Fernando Velesaca Orellana"
import Badge from "@/components/Badge.astro"
import LinkedInIcon from "@/components/icons/LinkedIn.astro"
import MailIcon from "@/components/icons/Mail.astro"
import SocialPill from "@/components/SocialPill.astro"
import Download from "./icons/Download.astro"

// Function to calculate years of experience from October 2021
function calculateExperienceYears(): string {
  const startDate = new Date('2021-10-01')
  const endDate = new Date();

  if (isNaN(endDate.getTime())) {
    throw new Error('Fecha final inválida')
  }

  const diffInMilliseconds = endDate.getTime() - startDate.getTime()
  const diffInYears = diffInMilliseconds / (1000 * 60 * 60 * 24 * 365.25)

  const rounded = Math.ceil(diffInYears * 2) / 2

  return rounded.toFixed(1);
}

const experienceYears = calculateExperienceYears()
---

<div class="max-w-xl">
  <div class="flex gap-4 mb-4">
    <img
      class="rounded-full shadow-lg"
      width="150" 
      height="150"
      src="/diegovo.webp"
      alt={personalImageAlt}
    />
    <a
      href="https://linkedin.com/in/diegovo"
      target="_blank"
      rel="noopener"
      class="flex items-center mt-auto transition md:justify-center md:hover:scale-105"
    >
      <Badge>Disponible para trabajar</Badge>
    </a>
  </div>
  <h1
    class="text-4xl font-bold tracking-tight text-gray-800 sm:text-5xl dark:text-white"
  >
    <span class="hidden sm:inline">Diego Velesaca Orellana</span>
    <span class="inline sm:hidden">Diego Velesaca O.</span>
  </h1>
  <h3
    class="text-3xl font-bold tracking-tight text-gray-800 sm:text-4xl dark:text-white"
  >
    Desarrollador Full-Stack
  </h3>
  <p
    class="mt-6 text-xl text-gray-800 dark:[&>strong]:text-yellow-200 [&>strong]:text-yellow-500 [&>strong]:font-semibold dark:text-gray-300"
  >
    {experienceYears} años de experiencia. <strong
      >Desarrollador Full-Stack e Ingeniero de Software</strong
    >  de Cuenca, Ecuador 🇪🇨. Especializado en el desarrollo de 
       soluciones tecnológicas innovadoras.
  </p>
  <nav class="flex flex-wrap gap-4 mt-8">
    <SocialPill href="mailto:diegovo@outlook.com">
      <MailIcon class="size-4" />
      Contáctame
    </SocialPill>
    <SocialPill href="https://linkedin.com/in/diegovo">
      <LinkedInIcon class="size-4" />
      LinkedIn
    </SocialPill>
    <SocialPill href="/docs/CV_DIEGO_VELESACA_SOFTWARE_DEVELOPER_ES.pdf">
      <Download class="size-4" />
      Descargar CV
    </SocialPill>
  </nav>
</div>
